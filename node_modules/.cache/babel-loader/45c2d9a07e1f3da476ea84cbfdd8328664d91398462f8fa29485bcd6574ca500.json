{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport axios from 'axios';\nexport default function useFetch(queryField, queryAttributesStr) {\n  _s();\n  // Declaring the essential state variables for data and checking\n  // if the request is loading or succeeded\n  const [data, setData] = useState(null);\n  const [success, setSuccess] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const controller = new AbortController();\n  axios.defaults.baseURL = 'https://iu243g07g9.execute-api.us-east-1.amazonaws.com/Dev/';\n  useEffect(() => {\n    // Changing loading and success state to true whenever there's an effect\n    setLoading(true);\n    setSuccess(false);\n    // Extracting data from queryAttributesStr\n    const queryAttributes = JSON.parse(queryAttributesStr);\n    const options = {\n      headers: {\n        \"content-type\": \"text/plain\"\n      }\n    };\n    function CRUDOperations(requestField, inputData, signal) {\n      if (requestField === 'addCourse') {\n        const id = Math.floor(Math.random() * (999999 - 100 + 1) + 100);\n        const params = {\n          'ID': {\n            N: id\n          },\n          'CourseName': {\n            S: inputData.CourseName\n          },\n          'CourseURL': {\n            S: inputData.CourseURL\n          },\n          'ImageURL': {\n            S: inputData.ImageURL\n          }\n        };\n        axios.post(`/course`, options, {\n          params: params\n        }).then(response => {\n          console.log(response);\n          if (response.status !== 200) {\n            alert(\"Server Error: Course creation failed.\");\n          }\n        }).catch(error => {\n          console.error(\"Network Error:\", error);\n          alert(\"Network Error: Course creation failed.\");\n        });\n      }\n      if (requestField === 'editCourse') {\n        const params = {\n          ID: inputData.id,\n          CourseName: inputData.CourseName,\n          CourseURL: inputData.CourseURL,\n          ImageURL: inputData.ImageURL\n        };\n        axios.put(`/course/${inputData.id}`, options, {\n          params: params\n        }, inputData, {\n          signal\n        }).then(response => {\n          console.log(response);\n          if (response.status !== 200) {\n            alert(\"Server Error: Course updation failed.\");\n          }\n        }).catch(error => {\n          console.error(\"Network Error:\", error);\n          alert(\"Network Error: Course updation failed.\");\n        });\n      }\n      if (requestField === 'removeCourse') {\n        axios.delete(`/course/${inputData.id}`, options, {\n          signal\n        }).then(response => {\n          console.log(response);\n          if (response.status !== 200) {\n            alert(\"Server Error: Course deletion failed.\");\n          }\n        }).catch(error => {\n          console.error(\"Network Error:\", error);\n        });\n      }\n    }\n    // asynchronous function to make API call\n    async function fetchData() {\n      try {\n        const signal = controller.signal;\n        if (queryField !== \"allCourses\") {\n          await CRUDOperations(queryField, queryAttributes, signal);\n        }\n        const response = await axios.get('/course', options, {\n          signal\n        });\n        console.log(response);\n        // Checking if the request was a success\n        if (response.status === 200) {\n          setSuccess(true);\n          setData(response); // Storing response data\n        } else {\n          const errorMessage = response.data.errorMessage || response.data.statusText;\n          throw new Error(`Status Code: ${response.status}\\nError Message: ${errorMessage}`);\n        }\n      } catch (error) {\n        console.error(error.message);\n        setData({\n          error: error.message\n        });\n        setSuccess(false);\n      } finally {\n        // Changing loading state to false whenever the API request ends in success or failure\n        setLoading(false);\n      }\n    }\n    // Making sure that a null field is not passed\n    if (queryField) {\n      fetchData();\n    } else {\n      setLoading(false);\n      setSuccess(true);\n    }\n    // Cancelling the fetch request in case the user navigates\n    // away from the screen\n    return () => {\n      controller.abort();\n    };\n    // Defining variables that trigger useFetch\n  }, [queryField, queryAttributesStr]);\n  // Returning useFetch response\n  return {\n    data,\n    success,\n    loading\n  };\n}\n_s(useFetch, \"WV32FdFC8Rv4uoPGAXVf2am2g6g=\");","map":{"version":3,"names":["useState","useEffect","axios","useFetch","queryField","queryAttributesStr","_s","data","setData","success","setSuccess","loading","setLoading","controller","AbortController","defaults","baseURL","queryAttributes","JSON","parse","options","headers","CRUDOperations","requestField","inputData","signal","id","Math","floor","random","params","N","S","CourseName","CourseURL","ImageURL","post","then","response","console","log","status","alert","catch","error","ID","put","delete","fetchData","get","errorMessage","statusText","Error","message","abort"],"sources":["/Users/Zainab/Desktop/SAMAppFrontend/frontend/src/hooks/useFetch.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport axios from 'axios';\nexport default function useFetch(queryField, queryAttributesStr) {\n  // Declaring the essential state variables for data and checking\n  // if the request is loading or succeeded\n  const [data, setData] = useState(null);\n  const [success, setSuccess] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const controller = new AbortController();\n\n  axios.defaults.baseURL  = 'https://iu243g07g9.execute-api.us-east-1.amazonaws.com/Dev/'\n\n  useEffect(() => {\n    // Changing loading and success state to true whenever there's an effect\n    setLoading(true);\n    setSuccess(false);\n    // Extracting data from queryAttributesStr\n    const queryAttributes = JSON.parse(queryAttributesStr);\n    const options = { headers:\n        {\n          \"content-type\": \"text/plain\"\n        }}\n    function CRUDOperations(requestField, inputData, signal){\n        if (requestField === 'addCourse'){\n            const id = Math.floor(Math.random() * (999999 - 100 + 1) + 100);\n            const params = {\n              'ID' : { N: id },\n              'CourseName' : { S: inputData.CourseName},\n              'CourseURL' : {S: inputData.CourseURL},\n              'ImageURL' : {S: inputData.ImageURL}\n            }\n            axios.post(`/course`, options, { params: params}).\n            then(response => {\n                console.log(response)\n                if (response.status !== 200) {\n                    alert(\"Server Error: Course creation failed.\");\n                }\n                })\n                .catch(error => {\n                    console.error(\"Network Error:\", error);\n                    alert(\"Network Error: Course creation failed.\");\n                });\n        }\n        if (requestField === 'editCourse'){\n          const params = {\n            ID : inputData.id,\n            CourseName : inputData.CourseName,\n            CourseURL : inputData.CourseURL,\n            ImageURL : inputData.ImageURL\n          }\n            axios.put(`/course/${inputData.id}`, options, {params: params}, inputData, { signal }).\n            then(response => {\n              console.log(response)\n                if (response.status !== 200) {\n                    alert(\"Server Error: Course updation failed.\");\n                }\n                })\n                .catch(error => {\n                    console.error(\"Network Error:\", error);\n                    alert(\"Network Error: Course updation failed.\");\n                });\n        }\n        if (requestField === 'removeCourse'){\n            axios.delete(`/course/${inputData.id}`, options, { signal }).\n            then(response => {\n                console.log(response)\n            if (response.status !== 200) {\n                alert(\"Server Error: Course deletion failed.\");\n            }\n            })\n            .catch(error => {\n                console.error(\"Network Error:\", error);\n            });\n        }\n    }\n    // asynchronous function to make API call\n    async function fetchData() {\n      try {\n        const signal = controller.signal;\n        if (queryField !== \"allCourses\"){\n            await CRUDOperations(queryField, queryAttributes, signal)\n        }\n        const response = await axios.get('/course', options, { signal });\n        console.log(response)\n        // Checking if the request was a success\n        if (response.status === 200) {\n          setSuccess(true);\n          setData(response); // Storing response data\n        } else {\n          const errorMessage = response.data.errorMessage || response.data.statusText;\n          throw new Error(`Status Code: ${response.status}\\nError Message: ${errorMessage}`);\n        }\n      } catch (error) {\n        console.error(error.message);\n        setData({ error: error.message });\n        setSuccess(false);\n      } finally {\n        // Changing loading state to false whenever the API request ends in success or failure\n        setLoading(false);\n      }\n    }\n    // Making sure that a null field is not passed\n    if (queryField) {\n      fetchData();\n    } else {\n      setLoading(false);\n      setSuccess(true);\n    }\n    // Cancelling the fetch request in case the user navigates\n    // away from the screen\n    return () => {\n      controller.abort();\n    };\n    // Defining variables that trigger useFetch\n  }, [queryField, queryAttributesStr]);\n  // Returning useFetch response\n  return { data, success, loading };\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}